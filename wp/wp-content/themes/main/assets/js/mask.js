function maskPhone(){function t(t){if(!t)return"";"7"!==t[0]&&"8"!==t[0]&&(t="7"+t);const e="8"===t[0]?"8 (___) ___ __ __":"+7 (___) ___ __ __";let n=0,i="";for(const s of e){if(n>=t.length)break;"_"===s||/\d/.test(s)?i+=t[n++]:i+=s}return i}document.querySelectorAll('[type="tel"]').forEach((e=>{e.setAttribute("data-original-placeholder",e.placeholder);let n=!0;e.addEventListener("focus",(function(){this.value||(n?(e.blur(),n=!1):(this.value="+7 (",this.placeholder="")),setTimeout((()=>{this.setSelectionRange(this.value.length,this.value.length)}),0)})),e.addEventListener("input",(function(e){const n="deleteContentBackward"===e.inputType;const i=this.value.replace(/\D/g,"");if(n)return;let s=t(i);this.value=s,setTimeout((()=>{const t=this.value.indexOf("_");!function(t,e){t.setSelectionRange(e,e)}(this,-1===t?this.value.length:t)}),0)})),e.addEventListener("paste",(function(e){e.preventDefault();let n=(e.clipboardData||window.clipboardData).getData("text");n=n.replace(/\D/g,""),this.value=t(n)})),e.addEventListener("change",(function(){if(!(e.closest("form").querySelector('[type="submit"]')||e.closest("form").querySelector('button:not([type="button"])')))return;const t=this.value.startsWith("8")?17:18;this.value.length<t?(this.reportValidity(),this.classList.add("error")):this.classList.remove("error")}))}))}window.addEventListener("DOMContentLoaded",(()=>{maskPhone()}));